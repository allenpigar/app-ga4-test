(this["webpackJsonpapp-google-analytics-ga4"]=this["webpackJsonpapp-google-analytics-ga4"]||[]).push([[0],{231:function(e,t,n){},331:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(66),s=n.n(c),i=(n(231),n(196)),o=n(10),l=n(13),u=n.n(l),d=n(16),j=n(5),b=n(43),f=n(19),h={shellBarData:function(){return{labels:["Loading","Loading","Loading","Loading","Loading","Loading","Loading"],datasets:[{label:"Loading",backgroundColor:"rgba(0,0,0,0.2)",borderColor:"rgba(0,0,0,0,1)",borderWidth:1,hoverBackgroundColor:"rgba(0,0,0,0,0.4)",hoverBorderColor:"rgba(0,0,0,0,1)",data:[0,0,0,0,0,0,0]}]}},shellDoughnutData:function(){return{labels:["Loading","Loading","Loading"],datasets:[{data:[20,20,20],backgroundColor:["rgba(0,0,0,0,0.4)","rgba(0,0,0,0,0.4)","rgba(0,0,0,0,0.4)"],hoverBackgroundColor:["rgba(0,0,0,0,0.7)","rgba(0,0,0,0,0.7)","rgba(0,0,0,0,0.7)"]}]}}},p=n(46),x=n(425),O=n(427),g=n(125),m=n(428),v=n(0),y=function(e){var t=e.title,n=e.loading,a=void 0!==n&&n,r=e.subTitle,c=e.rightMenu,s=e.children;return Object(v.jsxs)(x.a,{sx:{padding:"20px"},children:[Object(v.jsxs)(O.a,{display:"flex",justifyContent:"center",gap:4,children:[Object(v.jsx)(O.a,{flexGrow:1,children:Object(v.jsx)(g.a,{variant:"h2",sx:{fontWeight:"600",fontSize:"14pt",color:"#5b667d"},children:t})}),Object(v.jsx)(O.a,{children:c}),Object(v.jsx)(O.a,{children:Object(v.jsx)(g.a,{variant:"h2",sx:{fontWeight:"200",fontSize:"14pt"},children:r})})]}),Object(v.jsxs)(O.a,{sx:{paddingTop:"18px",position:"relative"},children:[a&&Object(v.jsx)(O.a,{sx:{top:0,left:0,right:0,bottom:0,position:"absolute",backgroundColor:"rgba(255,255,255, 0.7)",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(v.jsx)(m.a,{})}),s]})]})},D=n(418),w=n(415),S=r.a.forwardRef((function(e,t){return Object(v.jsx)(w.a,Object(o.a)({elevation:6,ref:t,variant:"filled"},e))})),k=Object(a.forwardRef)((function(e,t){var n=Object(a.useState)(!1),r=Object(j.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(""),l=Object(j.a)(i,2),u=l[0],d=l[1],b=Object(a.useState)(""),f=Object(j.a)(b,2),h=f[0],p=f[1];Object(a.useImperativeHandle)(t,(function(){return{show:function(e){s(!0),d("success"),p(e)},error:function(e){s(!0),d("error"),p(e)}}}));var x=function(){s(!1)};return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(D.a,Object(o.a)(Object(o.a)({open:c,autoHideDuration:6e3,onClose:x},e),{},{children:Object(v.jsx)(S,{onClose:x,severity:u,sx:{width:"100%"},children:h})}))})})),C=r.a.createContext();function I(){return Object(a.useContext)(C)}function P(e){var t=e.children,n=Object(a.useRef)(null);return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(C.Provider,{value:n,children:[Object(v.jsx)(k,{ref:n}),t]})})}var A=["rgba(122,86,255,0.9)","rgba(54,162,235,0.9)","rgba(255,206,86,0.9)","rgba(65,234,212,0.9)","rgba(255,0,34,0.9)","rgba(86,255,122,0.9)","rgba(255,86,219,0.9)","rgba(255,122,86,0.9)","rgba(86,219,255,0.9)"],Y=[].concat(A,A,A),T=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bar",n={labels:[],datasets:[]};return e.reports[0].metricHeaders.forEach((function(e,a){var r={label:T(e.name),data:[],backgroundColor:Y[a]};"pie"===t&&(r.backgroundColor=[]),n.datasets.push(r)})),e.reports[0].rows.forEach((function(e,a){var r=[];e.dimensionValues.forEach((function(e){r.push(e.value)})),n.labels.push(r.join(" ")),e.metricValues.forEach((function(e,r){n.datasets[r].data.push(e.value),"pie"===t&&n.datasets[r].backgroundColor.push(Y[a])}))})),n},F=function(e){var t={headers:[],data:[]};return e.reports[0].dimensionHeaders.forEach((function(e,n){t.headers.push(T(e.name))})),e.reports[0].metricHeaders.forEach((function(e,n){t.headers.push(T(e.name))})),e.reports[0].rows.forEach((function(e){var n=[];e.dimensionValues.forEach((function(e){n.push(e.value)})),e.metricValues.forEach((function(e){n.push(e.value)})),t.data.push(n)})),t},M=function(e){var t,n;return{reports:[{columnHeader:{dimensions:e.reports[0].dimensionHeaders.map((function(e){return T(e.name)})),metricHeader:{metricHeaderEntries:e.reports[0].metricHeaders.map((function(e){return{name:T(e.name),type:""}}))}},data:{rows:e.reports[0].rows.map((function(e){return{dimensions:e.dimensionValues.map((function(e){return e.value})),metrics:[{values:e.metricValues.map((function(e){return e.value}))}]}})),totals:[{values:null===(t=e.reports[0].totals[0])||void 0===t||null===(n=t.metricValues)||void 0===n?void 0:n.map((function(e){return e.value}))}]}}]}},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bar";return{chartJSData:z(e,t),tableData:F(e),googleData:M(e)}},E=function(e){var t=e.instanceZUID,n=e.googleDetails,r=e.dateRange,c=e.data,s=e.token,i=I(),o=Object(a.useState)(c),l=Object(j.a)(o,2),b=l[0],f=l[1],h=Object(a.useState)(!1),x=Object(j.a)(h,2),O=x[0],g=x[1];Object(a.useEffect)(Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=14;break}return e.prev=1,g(!0),e.next=5,m();case 5:t=e.sent,f(t.chartJSData),g(!1),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),g(!1),e.abrupt("return",i.current.error("Unable to fetch Page View Traffic data."));case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),[n,r]);var m=function(){var e=Object(d.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://us-central1-zesty-prod.cloudfunctions.net/getPropertyDataByQuery","/?zuid=").concat(t),{method:"POST",credentials:"omit",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({property:n.name,requests:[{dimensions:[{name:"date"}],metrics:[{name:"screenPageViews"},{name:"sessions"}],dateRanges:[{startDate:r.startDate,endDate:r.endDate}],orderBys:[{dimension:{orderType:"ALPHANUMERIC",dimensionName:"date"}}],keepEmptyRows:!0}]})}).then((function(e){return e.json()}));case 2:return a=e.sent,e.abrupt("return",L(a,"bar"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)(y,{title:"Pageview Traffic",subTitle:"Custom"===r.selectedItem?r.startDate+" to "+r.endDate:r.selectedItem,loading:O,children:Object(v.jsx)(p.b,{data:b,height:553,options:{maintainAspectRatio:!1,bezierCurve:!1,scales:{yAxes:[{display:!0}],xAxes:[{display:!1}]},options:{legend:{display:!0,position:"bottom"}}}})})},R=function(e){var t=e.data,n=e.instanceZUID,r=e.googleDetails,c=e.dateRange,s=e.token,i=I(),o=Object(a.useState)(t),l=Object(j.a)(o,2),b=l[0],f=l[1],h=Object(a.useState)(!1),x=Object(j.a)(h,2),O=x[0],g=x[1];Object(a.useEffect)(Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=14;break}return e.prev=1,g(!0),e.next=5,m();case 5:t=e.sent,f(t.chartJSData),g(!1),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),g(!1),e.abrupt("return",i.current.error("Unable to fetch Inbound traffic data."));case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),[r,c]);var m=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://us-central1-zesty-prod.cloudfunctions.net/getPropertyDataByQuery","/?zuid=").concat(n),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({property:r.name,requests:[{dimensions:[{name:"firstUserDefaultChannelGroup"}],metrics:[{name:"sessions"}],dateRanges:[{startDate:c.startDate,endDate:c.endDate}],dimensionFilter:{notExpression:{filter:{fieldName:"firstUserDefaultChannelGroup",stringFilter:{matchType:"EXACT",value:"(not set)"}}}}}]})}).then((function(e){return e.json()}));case 2:return t=e.sent,e.abrupt("return",L(t,"pie"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)(y,{title:"Inbound Traffic",subTitle:"Custom"===c.selectedItem?c.startDate+" to "+c.endDate:c.selectedItem,loading:O,children:Object(v.jsx)(p.a,{data:b,height:220,options:{maintainAspectRatio:!1,legend:{display:!0,position:"left"}}})})},U=function(e){var t=e.instanceZUID,n=e.googleDetails,r=e.dateRange,c=e.data,s=e.token,i=I(),o=Object(a.useState)(c),l=Object(j.a)(o,2),b=l[0],f=l[1],h=Object(a.useState)(!1),x=Object(j.a)(h,2),O=x[0],g=x[1];Object(a.useEffect)(Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=15;break}return e.prev=1,g(!0),e.next=5,m();case 5:t=e.sent,f(t.chartJSData),g(!1),e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(1),console.log(e.t0),g(!1),e.abrupt("return",i.current.error("Unable to fetch social traffic data."));case 15:case"end":return e.stop()}}),e,null,[[1,10]])}))),[n,r]);var m=function(){var e=Object(d.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://us-central1-zesty-prod.cloudfunctions.net/getPropertyDataByQuery","/?zuid=").concat(t),{method:"POST",credentials:"omit",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({property:n.name,requests:[{dimensions:[{name:"firstUserSource"}],metrics:[{name:"sessions"}],dateRanges:[{startDate:r.startDate,endDate:r.endDate}],limit:10,orderBys:[{metric:{metricName:"sessions"},desc:!0}]}]})}).then((function(e){return e.json()}));case 2:return a=e.sent,e.abrupt("return",L(a,"pie"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)(y,{title:"Social Traffic",subTitle:"Custom"===r.selectedItem?r.startDate+" to "+r.endDate:r.selectedItem,loading:O,children:Object(v.jsx)(p.a,{data:b,height:220,options:{maintainAspectRatio:!1,legend:{display:!0,position:"left"}}})})},N=n(430),B=n(434),V=n(433),W=n(431),Z=n(432);function G(e){var t=e.googleDetails,n=e.dateRange,r=e.instanceZUID,c=e.token,s=I(),i=Object(a.useState)([]),o=Object(j.a)(i,2),l=o[0],b=o[1],f=Object(a.useState)([]),h=Object(j.a)(f,2),p=h[0],x=h[1],O=Object(a.useState)(!1),g=Object(j.a)(O,2),m=g[0],D=g[1];Object(a.useEffect)(Object(d.a)(u.a.mark((function e(){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=16;break}return e.prev=1,D(!0),e.next=5,w();case 5:n=e.sent,a=n.tableData.data.map((function(e){return e.map((function(e){return Number(e)?Number(Math.round(e+"e2")+"e-2"):e}))})),b(n.tableData.headers),x(a),D(!1),e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),D(!1),e.abrupt("return",s.current.error("Unable to get top contents data."));case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),[t,n]);var w=function(){var e=Object(d.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://us-central1-zesty-prod.cloudfunctions.net/getPropertyDataByQuery","/?zuid=").concat(r),{method:"POST",credentials:"omit",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify({property:t.name,requests:[{dimensions:[{name:"pagePath"}],metrics:[{name:"averageSessionDuration"},{name:"bounceRate"},{name:"sessions"}],dateRanges:[{startDate:n.startDate,endDate:n.endDate}],limit:"10",orderBys:[{metric:{metricName:"sessions"},desc:!0}]}]})}).then((function(e){return e.json()}));case 2:return a=e.sent,e.abrupt("return",L(a,"bar"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsx)(y,{title:"Top Performing Content",loading:m,subTitle:"Custom"===n.selectedItem?n.startDate+" to "+n.endDate:n.selectedItem,children:l.length&&p.length?Object(v.jsxs)(N.a,{children:[Object(v.jsx)(W.a,{children:Object(v.jsx)(Z.a,{children:l.map((function(e){return Object(v.jsx)(V.a,{sx:{fontWeight:600},children:e.replace(/([A-Z])/g," $1").trim()})}))})}),Object(v.jsx)(B.a,{children:p.map((function(e,t){return Object(v.jsx)(Z.a,{children:e.map((function(e){return Object(v.jsx)(V.a,{children:e})}))})}))})]}):"No content performance data to display"})}var H=n(421),J=r.a.createContext();function q(){return Object(a.useContext)(J)}function _(e){var t=e.children,n=Object(a.useState)(null),r=Object(j.a)(n,2),c=r[0],s=r[1],i=Object(a.useState)(!0),o=Object(j.a)(i,2),l=o[0],u=o[1];return Object(v.jsx)(J.Provider,{value:{googleDetails:c,setGoogleDetails:s,isAuthenticated:l,setIsAuthenticated:u},children:t})}var $=n(22),Q=n.n($),X=r.a.createContext(),K=r.a.createContext();function ee(){return Object(a.useContext)(X)}function te(e){var t=e.children,n=Object(a.useState)({selectedItem:"Last 7 Days",startDate:Q()().subtract(7,"days").format("YYYY-MM-DD"),endDate:Q()().format("YYYY-MM-DD")}),r=Object(j.a)(n,2),c=r[0],s=r[1];return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(X.Provider,{value:c,children:Object(v.jsx)(K.Provider,{value:function(e){return s(e)},children:t})})})}function ne(e){var t=e.instance,n=e.token,a=q(),r=a.googleDetails,c=(a.setGoogleDetails,ee());return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(H.a,{container:!0,spacing:4,children:[Object(v.jsx)(H.a,{item:!0,xs:12,md:7,lg:7,children:Object(v.jsx)(E,{instanceZUID:t.ZUID,googleDetails:r,data:h.shellBarData,dateRange:c,token:n})}),Object(v.jsx)(H.a,{item:!0,xs:12,md:5,lg:5,children:Object(v.jsxs)(O.a,{sx:{display:"flex",flexDirection:"column"},children:[Object(v.jsx)(O.a,{sx:{marginBottom:4},children:Object(v.jsx)(R,{instanceZUID:t.ZUID,googleDetails:r,data:h.shellDoughnutData,dateRange:c,token:n})}),Object(v.jsx)(O.a,{children:Object(v.jsx)(U,{instanceZUID:t.ZUID,googleDetails:r,dateRange:c,data:h.shellDoughnutData,token:n})})]})}),Object(v.jsx)(H.a,{item:!0,xs:12,children:Object(v.jsx)(G,{instanceZUID:t.ZUID,googleDetails:r,dateRange:c,token:n})})]})})}var ae=n(17),re=n(412);function ce(e){var t=e.selectedPagePath,n=e.onCheckChange,r=e.tableData,c=e.isLoading,s=void 0===c||c,i=I(),o=Object(a.useState)([]),l=Object(j.a)(o,2),b=l[0],f=l[1],h=Object(a.useState)([]),p=Object(j.a)(h,2),x=p[0],O=p[1],g=Object(a.useState)(!1),m=Object(j.a)(g,2),D=(m[0],m[1]);return Object(a.useEffect)(Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r.length)try{t=r.tableData.data.map((function(e){return e.map((function(e){return Number(e)?Number(Math.round(e+"e2")+"e-2"):e}))})),f(r.tableData.headers),O(t)}catch(n){D(!1),i.current.error(n.message)}case 1:case"end":return e.stop()}}),e)}))),[r,t]),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(y,{title:"Pages",loading:s,children:b.length&&x.length?Object(v.jsxs)(N.a,{children:[Object(v.jsx)(W.a,{children:Object(v.jsxs)(Z.a,{children:[Object(v.jsx)(V.a,{}),b.map((function(e){return Object(v.jsx)(V.a,{children:e.replace(/([A-Z])/g," $1").trim()})}))]})}),Object(v.jsx)(B.a,{children:x.map((function(e,a){var r=t.includes(e[0]),c="enhanced-table-checkbox-".concat(a);return Object(v.jsxs)(Z.a,{sx:{backgroundColor:0!==t.length?t.includes(e[0])?"#ffffff":"#f2f4fb":"#ffffff"},children:[Object(v.jsx)(V.a,{padding:"checkbox",children:Object(v.jsx)(re.a,{color:"secondary",checked:r,onChange:function(t){return n(t,e[0])},inputProps:{"aria-labelledby":c}})}),e.map((function(e){return Object(v.jsx)(V.a,{children:e})}))]})}))})]}):"No content performance data to display"})})}var se=n(436),ie=n(435),oe=n(439),le=n(438);function ue(e){var t=e.metrics,n=e.selectedMetrics,r=e.onSelect,c=a.useState(null),s=Object(j.a)(c,2),i=s[0],o=s[1],l=Boolean(i),u=l?"simple-popover":void 0;return Object(v.jsxs)("div",{children:[Object(v.jsx)(ie.a,{"aria-describedby":u,onClick:function(e){o(e.currentTarget)},sx:{padding:0,cursor:"pointer"},color:"secondary",children:Object(v.jsx)(g.a,{sx:{fontWeight:"bold"},children:n||"Select a Metric"})}),Object(v.jsx)(se.a,{id:u,open:l,anchorEl:i,onClose:function(){o(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},children:Object(v.jsx)(O.a,{p:4,children:Object(v.jsx)(le.a,{children:t.map((function(e,t){var a=!!n&&e.label===n,c="enhanced-table-checkbox-".concat(t);return Object(v.jsx)(oe.a,{control:Object(v.jsx)(re.a,{color:"secondary",onChange:function(t){return r(t,e.label)},checked:a,inputProps:{"aria-labelledby":c}}),label:e.label})}))})})})]})}function de(e){e.selectedPath;var t=e.data,n=e.isLoading,r=void 0===n||n,c=ee(),s=Object(a.useState)(null),i=Object(j.a)(s,2),l=i[0],u=i[1],d=Object(a.useState)(null),b=Object(j.a)(d,2),f=b[0],h=b[1];Object(a.useEffect)((function(){t&&"Loading"!==t.datasets[0].label&&null===l&&null===f&&u("ScreenPageViews")}),[t]);var x=function(e,t){if(e.target.checked)return u(t);u(null)},m=function(e,t){if(e.target.checked)return h(t);h(null)},D=function(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(O.a,{sx:{display:"flex",gap:2,alignItems:"center",justifyContent:"center"},children:[Object(v.jsx)(ue,{metrics:t.datasets,selectedMetrics:l,onSelect:x}),Object(v.jsx)(g.a,{children:"vs"}),Object(v.jsx)(ue,{metrics:t.datasets,selectedMetrics:f,onSelect:m})]})})},w=function(e,t,n){if(f)return f.includes("Duration")?Q()().startOf("day").seconds(Number(e)).format("HH:mm:ss"):f.includes("Rate")?Math.round(e)+"%":f.includes("Value")?e+"$":e},S=function(e,t,n){if(l)return l.includes("Duration")?Q()().startOf("day").seconds(Number(e)).format("HH:mm:ss"):l.includes("Rate")?Math.round(e)+"%":l.includes("Value")?e+"$":e};return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(y,{title:"Metric",loading:r,subTitle:c.selectedItem,rightMenu:Object(v.jsx)(D,{}),children:Object(v.jsx)(p.b,{data:{labels:t.labels,datasets:[l?t.datasets.filter((function(e){return e.label===l})).map((function(e){return Object(o.a)(Object(o.a)({},e),{},{yAxisID:"y1"})})).shift():null,f?t.datasets.filter((function(e){return e.label===f})).map((function(e){return Object(o.a)(Object(o.a)({},e),{},{yAxisID:"y2"})})).shift():null].filter((function(e){return null!==e}))},height:400,options:{responsive:!0,maintainAspectRatio:!1,bezierCurve:!1,tooltips:{callbacks:{label:function(e){return t=e.datasetIndex,n=e.value,0===t?S(n):w(n);var t,n},title:function(e){var t=e[0].label;return Q()(t).format("YYYY-MM-DD")}}},scales:{yAxes:[{id:"y1",type:"linear",position:"left",ticks:{callback:S}},{id:"y2",type:"linear",position:"right",ticks:{callback:w}}],xAxes:[{ticks:{callback:function(e,t,n){return Q()(e).format("YYYY-MM-DD")}}}]}}})})})}var je=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,n);case 2:return a=e.sent,e.next=5,a.json();case 5:if(r=e.sent,a.ok){e.next=8;break}throw new Error(r.error);case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),be=function(e,t){var n="".concat("https://us-central1-zesty-prod.cloudfunctions.net/getPropertyDataByQuery","?zuid=").concat(e),a="".concat("https://us-central1-zesty-prod.cloudfunctions.net/getPropertyList","?zuid=").concat(e),r=function(){var e=Object(d.a)(u.a.mark((function e(a,r,c){var s,i,o,l=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>3&&void 0!==l[3]?l[3]:[],i={dimensions:[{name:"date"}],metrics:[{name:"averageSessionDuration"},{name:"bounceRate"},{name:"eventValue"},{name:"screenPageViews"},{name:"eventsPerSession"},{name:"conversions"}],dateRanges:[{startDate:r.startDate,endDate:r.endDate}],orderBys:[{dimension:{orderType:"NUMERIC",dimensionName:"date"},desc:!1}]},0!==s.length&&(i.dimensionFilter={filter:{fieldName:"pagePath",inListFilter:{values:s,caseSensitive:!0}}}),e.next=5,je(n,{method:"POST",credentials:"omit",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({property:a,requests:[i]})});case 5:return o=e.sent,e.abrupt("return",L(o,c));case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),c=function(){var e=Object(d.a)(u.a.mark((function e(a,r,c){var s,i,o,l,d=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>3&&void 0!==d[3]?d[3]:[],i=d.length>4&&void 0!==d[4]?d[4]:10,o={dimensions:[{name:"pagePath"}],metrics:[{name:"averageSessionDuration"},{name:"bounceRate"},{name:"eventValue"},{name:"screenPageViews"},{name:"eventsPerSession"},{name:"conversions"}],dateRanges:[{startDate:r.startDate,endDate:r.endDate}],orderBys:[{metric:{orderType:"NUMERIC",metricName:"screenPageViews"},desc:!0}],metricAggregations:["TOTAL"],limit:i},0!==s.length&&(o.dimensionFilter={filter:{fieldName:"pagePath",inListFilter:{values:s,caseSensitive:!0}}}),e.next=6,je(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({property:a,requests:[o]})});case 6:return l=e.sent,e.abrupt("return",L(l,c));case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),s=function(){var e=Object(d.a)(u.a.mark((function e(a,r,c){var s,i,o,l,d=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>3&&void 0!==d[3]?d[3]:[],i=d.length>4&&void 0!==d[4]?d[4]:10,o={metrics:[{name:"averageSessionDuration"},{name:"bounceRate"},{name:"eventValue"},{name:"screenPageViews"},{name:"eventsPerSession"},{name:"conversions"}],dateRanges:[{startDate:r.startDate,endDate:r.endDate}],orderBys:[{metric:{orderType:"NUMERIC",metricName:"screenPageViews"},desc:!0}],metricAggregations:["TOTAL"],limit:i},0!==s.length&&(o.dimension=[{name:"pagePath"}],o.dimensionFilter={filter:{fieldName:"pagePath",inListFilter:{values:s,caseSensitive:!0}}}),e.next=6,je(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({property:a,requests:[o]})});case 6:return l=e.sent,e.abrupt("return",L(l,c));case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return{getChartData:r,getContentPages:c,getGaDomain:function(){return je(a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}})},getPageJourney:function(){var e=Object(d.a)(u.a.mark((function e(t,a,r){var c,s,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify({property:t,requests:[{dimensions:[{name:"pageReferrer"},{name:"pagePath"}],metrics:[{name:"sessions"},{name:"screenPageViews"}],dateRanges:[{startDate:a.startDate,endDate:a.endDate}],orderBys:[{metric:{metricName:"sessions"},desc:!0}],metricAggregations:["TOTAL"]}]})});case 2:return c=e.sent,s=L(c),(i=s.googleData).reports[0].data.rows=s.googleData.reports[0].data.rows.map((function(e){var t=e.dimensions[0];return t.includes("https://www.zesty.io")&&(t=t.replace("https://www.zesty.io","")),(t.includes("https")||t.includes("http")||""===t)&&(t="(entrance)"),Object(o.a)(Object(o.a)({},e),{},{dimensions:[t,e.dimensions[1]]})})),e.abrupt("return",Object(o.a)(Object(o.a)({},s),{},{googleData:i}));case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),getContentSinglePage:s}},fe=n(404);function he(e){var t=e.data,n=e.selectedPath,r=e.tableData,c=Object(a.useState)([]),s=Object(j.a)(c,2),i=s[0],l=s[1],u=Object(a.useState)([]),d=Object(j.a)(u,2);d[0],d[1];Object(a.useEffect)((function(){if(0!==r.length){var e=[],a=null,c=b(t);0!==n.length&&(a=b(r)),c.forEach((function(t,n){e.push(Object(o.a)(Object(o.a)({},t),{},{selectedValue:null!==a?a[n].data:t.data}))})),l(e)}}),[r,n,t]);var b=function(e){var t=[],n=e.reports[0].columnHeader.metricHeader.metricHeaderEntries.map((function(e){return e.name.replace("ga:","").replace(/([A-Z])/g," $1").trim()})),a=e.reports[0].data.totals[0].values.map((function(e,t){return Number(Math.round(e+"e2")+"e-2")}));return n.forEach((function(e,n){t.push({label:e,data:a[n]})})),t},f=function(e,t){if(0==e||0==t)return 0;var n=Number(e)-0,a=Number(t)-0;return Math.round(a/n*100)},h=function(e){return Q()().startOf("day").seconds(Number(e)).format("HH:mm:ss")},p=function(e){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(H.a,{item:!0,sx:{padding:3},children:[Object(v.jsx)(g.a,{sx:{fontWeight:"bold",fontSize:"10pt",color:"#5b667d"},children:e.label}),Object(v.jsxs)(O.a,{sx:{marginTop:"5px"},children:[Object(v.jsx)(g.a,{color:"secondary",sx:{fontSize:"18pt",fontWeight:"bold",marginBottom:"5px"},children:null!==e.selectedValue?e.selectedValue:e.data}),Object(v.jsx)(g.a,{sx:{fontSize:"10pt"},children:"% of Total : ".concat(f(e.data,e.selectedValue),"%")}),Object(v.jsx)(g.a,{sx:{fontSize:"10pt",color:"#5b667d"},children:"(".concat(e.data,")")})]})]}),Object(v.jsx)(fe.a,{orientation:"vertical",flexItem:!0})]})},m=function(e){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(H.a,{item:!0,sx:{padding:3},children:[Object(v.jsx)(g.a,{sx:{fontWeight:"bold",fontSize:"10pt",color:"#5b667d"},children:e.label}),Object(v.jsxs)(O.a,{sx:{marginTop:"5px"},children:[Object(v.jsx)(g.a,{color:"secondary",sx:{fontSize:"18pt",fontWeight:"bold",marginBottom:"5px"},children:h(null!==e.selectedValue?e.selectedValue:e.data)}),Object(v.jsx)(g.a,{sx:{fontSize:"10pt"},children:"Avg for view: ".concat(h(e.data))}),Object(v.jsx)(g.a,{sx:{fontSize:"10pt",color:"#5b667d"},children:"( ".concat(f(e.data,e.selectedValue),"%)")})]})]}),Object(v.jsx)(fe.a,{orientation:"vertical",flexItem:!0})]})},y=function(e){return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(H.a,{item:!0,sx:{padding:3},children:[Object(v.jsx)(g.a,{sx:{fontWeight:"bold",fontSize:"10pt",color:"#5b667d"},children:e.label}),Object(v.jsxs)(O.a,{sx:{marginTop:"5px"},children:[Object(v.jsxs)(g.a,{color:"secondary",sx:{fontSize:"18pt",fontWeight:"bold",marginBottom:"5px"},children:[null!==e.selectedValue?e.selectedValue:e.data,"%"]}),Object(v.jsx)(g.a,{sx:{fontSize:"10pt"},children:"Avg for view : ".concat(f(e.data,e.selectedValue),"%")}),Object(v.jsx)(g.a,{sx:{fontSize:"10pt",color:"#5b667d"},children:"(".concat(e.data,"%)")})]})]}),Object(v.jsx)(fe.a,{orientation:"vertical",flexItem:!0})]})};return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(x.a,{children:Object(v.jsx)(H.a,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:0!==i.length&&i.map((function(e){return e.label.includes("TIME")?Object(v.jsx)(m,Object(o.a)({},e)):e.label.includes("RATE")?Object(v.jsx)(y,Object(o.a)({},e)):Object(v.jsx)(p,Object(o.a)({},e))}))})})})}function pe(e){var t=e.instance,n=e.token,r=Object(b.c)(),c=Object(j.a)(r,2),s=c[0],i=(c[1],be(t.ZUID,n)),o=i.getChartData,l=i.getContentPages,f=I(),p=ee(),x=q().googleDetails,O=Object(a.useState)([]),g=Object(j.a)(O,2),m=g[0],y=g[1],D=Object(a.useState)(h.shellBarData),w=Object(j.a)(D,2),S=w[0],k=w[1],C=Object(a.useState)([]),P=Object(j.a)(C,2),A=P[0],Y=P[1],T=Object(a.useState)([]),z=Object(j.a)(T,2),F=z[0],M=z[1],L=Object(a.useState)(!1),E=Object(j.a)(L,2),R=E[0],U=E[1];Object(a.useEffect)((function(){if(s.get("q"))return y([s.get("q")]);y([])}),[s]),Object(a.useEffect)(Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=20;break}return e.prev=1,U(!0),e.next=5,o(x.name,p,"bar",m);case 5:return t=e.sent,e.next=8,l(x.name,p,"bar",m,10);case 8:n=e.sent,k(t.chartJSData),M(n),Y(n.googleData),U(!1),e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(1),console.log(e.t0),U(!1),e.abrupt("return",f.current.error("Error : Unable to fetch analytics data."));case 20:case"end":return e.stop()}}),e,null,[[1,15]])}))),[x,m,p]);return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(H.a,{container:!0,spacing:4,children:[Object(v.jsx)(H.a,{item:!0,xs:12,children:Object(v.jsx)(de,{selectedPath:m,data:S,isLoading:R})}),Object(v.jsx)(H.a,{item:!0,xs:12,children:Object(v.jsx)(he,{selectedPath:m,data:F.googleData,tableData:A,isLoading:R})}),Object(v.jsx)(H.a,{item:!0,xs:12,children:Object(v.jsx)(ce,{selectedPagePath:m,tableData:F,onCheckChange:function(e,t){if(e.target.checked)return y([].concat(Object(ae.a)(m),[t]));y(m.filter((function(e){return e!==t})))},isLoading:R})})]})})}var xe=n(411);function Oe(e){var t=e.value,n=void 0===t?10:t,a=e.onChange;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(xe.a,{"aria-label":"Small steps",defaultValue:n,step:1,marks:!0,min:1,max:20,valueLabelDisplay:"auto",sx:{width:200},valueLabelFormat:function(e){return"".concat(e," Journey").concat(1!==e?"s":"")},onChange:function(e){return a(e)},color:"secondary"})})}var ge=n(420),me=n(417);function ve(e){var t=e.data,n=e.value,a=e.onChange;return Object(v.jsx)(me.a,{disablePortal:!0,id:"combo-box-demo",value:null===n?t[-1]:n,onChange:function(e,t){return a(t)},options:t,sx:{width:300},renderInput:function(e){return Object(v.jsx)(ge.a,Object(o.a)(Object(o.a)({},e),{},{size:"small",label:"Filter By Entrance"}))}})}var ye=n(146);function De(e){var t=e.data,n=e.filter,r=e.slice,c=Object(a.useState)(null),s=Object(j.a)(c,2),i=s[0],o=s[1],l=Object(a.useState)(null),u=Object(j.a)(l,2),d=u[0],b=u[1];Object(a.useEffect)((function(){if(t){var e=f(t.googleData);o(e)}}),[t,n,r]);var f=function(e){var t=e.reports[0].data.rows,a=e.reports[0].data.totals[0].values[1],c={},s=1;if(!t)return null;do{if(1===s){var i=t.filter((function(e){return"(entrance)"===e.dimensions[0]}));t=g(t,i),c["Level".concat(s)]=null!==n?i.filter((function(e){return e.dimensions[1]===n.label})).slice(0,r):i.slice(0,r)}else!function(){var e=[];c["Level".concat(s-1)].forEach((function(n,a){var r=t.filter((function(e){return n.dimensions[1]===e.dimensions[0]}));0!==r.length&&e.push.apply(e,Object(ae.a)(r))})),t=g(t,e),c["Level".concat(s)]=e.sort(x).slice(0,r)}();s+=1}while(s<20);var o=[["From","To","Visit"]];for(var l in c)c.hasOwnProperty(l)&&c[l].forEach((function(e){e.dimensions[0]===e.dimensions[1]||p(o,e)||o.push([e.dimensions[0],e.dimensions[1],Number(e.metrics[0].values[1])])}));var u=o.filter((function(e){return"(entrance)"===e[0]})).reduce((function(e,t){return e[2]>t[2]?e:t}),[]),d=o.filter((function(e){return e[0]===u[1]})).reduce((function(e,t){return e[2]>t[2]?e:t}),[]);return b({entrance:u,page:d,aveVisit:h(a,0!==d.length?d[2]:u[2])}),o},h=function(e,t){return(t/e*100).toFixed(2)},p=function(e,t){var n=!1;return e.forEach((function(e){e[0]===t.dimensions[0]&&e[1]===t.dimensions[1]&&(n=!0),e[0]===t.dimensions[1]&&(n=!0)})),n},x=function(e,t){return e.metrics[0].values[1]>t.metrics[0].values[1]?-1:e.metrics[0].values[1]<t.metrics[0].values[1]?1:0},g=function(e,t){var n=[];return e.forEach((function(e){t.includes(e)||n.push(e)})),n},m=["#7a56ff","#36a2eb","#ffce56","#41ead4","#ff0022","#56ff7a","#ff56db","#ff7a56","#56dbff","#7a56ff","#36a2eb","#ffce56","#41ead4","#ff0022","#56ff7a","#ff56db","#ff7a56","#56dbff"],y={sankey:{node:{nodePadding:20,colors:m},link:{colorMode:"gradient",colors:m}}};return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(O.a,{sx:{width:"100%",height:1e3},children:null!==i&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(O.a,{sx:{textAlign:"right",marginBottom:"20px"},children:[0!==d.page.length&&'The top page "'.concat(d.page[1],'" from the "').concat(d.entrance[1],'" entrance received ').concat(d.page[2]," visits (").concat(d.aveVisit,"%) of traffic flow"),0===d.page.length&&'The page "'.concat(d.entrance[1],'" received ').concat(d.entrance[2]," visits (").concat(d.aveVisit,"%) of traffic flow")]}),Object(v.jsx)(ye.a,{chartType:"Sankey",width:"100%",height:900,data:null===i?[["From","To","Visit"],["From","To",0]]:i,options:y})]})})})}function we(e){var t=e.instance,n=e.token,r=I(),c=q().googleDetails,s=ee(),i=be(t.ZUID).getPageJourney,o=Object(a.useState)(!1),l=Object(j.a)(o,2),b=l[0],f=l[1],h=Object(a.useState)(10),p=Object(j.a)(h,2),x=p[0],g=p[1],m=Object(a.useState)(null),D=Object(j.a)(m,2),w=D[0],S=D[1],k=Object(a.useState)([]),C=Object(j.a)(k,2),P=C[0],A=C[1],Y=Object(a.useState)(null),T=Object(j.a)(Y,2),z=T[0],F=T[1];Object(a.useEffect)(Object(d.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=17;break}return e.prev=1,f(!0),e.next=5,i(c.name,s,n);case 5:t=e.sent,a=E(t.googleData),F(t),A(a),f(!1),e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(1),console.log(e.t0),f(!1),e.abrupt("return",r.current.error(e.t0.message));case 17:case"end":return e.stop()}}),e,null,[[1,12]])}))),[c,s]);var M=function(e){if(null===e)return S(null);S(e)},L=Object(a.useCallback)(function(e){var t;return function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];var c=this;t&&clearTimeout(t),t=setTimeout((function(){t=null,e.apply(c,a)}),500)}}((function(e){g(e.target.value)})),[]),E=function(e){var t=e.reports[0].data.rows;return t?t.filter((function(e){return"(entrance)"===e.dimensions[0]})).map((function(e){return{label:e.dimensions[1]}})):[]},R=function(){return Object(v.jsxs)(O.a,{sx:{display:"flex",gap:4,alignItems:"center"},children:[Object(v.jsx)(ve,{data:P,value:w,onChange:M}),Object(v.jsx)(Oe,{value:x,onChange:L})]})};return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(y,{title:"User Journey - Beta",subTitle:s.selectedItem,loading:b,rightMenu:Object(v.jsx)(R,{}),children:Object(v.jsx)(De,{data:z,filter:w,slice:x})})})}var Se=function(e,t){var n=new window.Zesty.FetchWrapper(e,t,{authAPIURL:"".concat("https://auth.api.dev.zesty.io"),instancesAPIURL:"".concat(".api.dev.zesty.io/v1"),accountsAPIURL:"".concat("https://accounts.api.dev.zesty.io/v1"),mediaAPIURL:"".concat("https://svc.zesty.io"),sitesServiceURL:"".concat("https://svc.zesty.io/sites-service/")}),a=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getSettings();case 2:return t=e.sent,e.abrupt("return",t.data.find((function(e){return"google_property_id"===e.key})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getSettings();case 2:return t=e.sent,e.abrupt("return",t.data.find((function(e){return"google_property_id"===e.key})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{getGoogleSetting:a,getUserData:function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.verify();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),updateSetting:function(){var e=Object(d.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.updateSetting(t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),searchItems:function(){var n=Object(d.a)(u.a.mark((function n(a){var r,c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://".concat(e+".api.dev.zesty.io/v1","/search/items?q=").concat(a,"&order=created&dir=DESC"),{method:"GET",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:return r=n.sent,n.next=5,r.json();case 5:return c=n.sent,n.abrupt("return",c);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),getGooglePropertyID:r,createGa4Setting:function(){var n=Object(d.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,je("https://".concat(e+".api.dev.zesty.io/v1","/env/settings"),{method:"POST",headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({category:"analytics",key:"google_property_id",keyFriendly:"Google Property ID",value:"",dataType:"text"})});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()}},ke=n(3),Ce=n(422),Ie=n(443),Pe=n(423),Ae=n(442),Ye=n(413),Te=n(183),ze=n.n(Te),Fe=n(182),Me=n.n(Fe);function Le(){var e=ee(),t=Object(a.useContext)(K),n=Object(a.useState)(null),r=Object(j.a)(n,2),c=r[0],s=r[1],i=Boolean(c),l=i?"simple-popover":void 0,u=function(n){t(Object(o.a)(Object(o.a)({},e),{},Object(ke.a)({},n.target.name,n.target.value)))};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(O.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:4},children:[Object(v.jsxs)(g.a,{variant:"body2",sx:{color:"#5b667d",fontWeight:"bold",display:"flex",alignItems:"center",gap:2},children:[e.startDate," ",Object(v.jsx)(Me.a,{})," ",e.endDate]}),Object(v.jsx)(Ce.a,{"aria-describedby":l,variant:"contained",onClick:function(e){return s(e.currentTarget)},color:"secondary",startIcon:Object(v.jsx)(ze.a,{}),children:"Change Date Range"})]}),Object(v.jsx)(se.a,{id:l,open:i,anchorEl:c,onClose:function(){return s(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},children:Object(v.jsxs)(O.a,{sx:{minWidth:200,padding:4,display:"flex",flexDirection:"column",gap:2},children:[Object(v.jsxs)(Ae.a,{fullWidth:!0,children:[Object(v.jsx)(Ie.a,{id:"demo-simple-select-label",children:"Date Range"}),Object(v.jsxs)(Ye.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:e.selectedItem,label:"Date Range",onChange:function(e){var n=e.target.value;"Today"===n&&t({selectedItem:"Today",startDate:Q()().format("YYYY-MM-DD"),endDate:Q()().format("YYYY-MM-DD")}),"Yesterday"===n&&t({selectedItem:"Yesterday",startDate:Q()().subtract(1,"days").format("YYYY-MM-DD"),endDate:Q()().format("YYYY-MM-DD")}),"Last Week"===n&&t({selectedItem:"Last Week",startDate:Q()().subtract(1,"weeks").startOf("week").format("YYYY-MM-DD"),endDate:Q()().subtract(1,"weeks").endOf("week").format("YYYY-MM-DD")}),"Last Month"===n&&t({selectedItem:"Last Month",startDate:Q()().subtract(1,"months").startOf("month").format("YYYY-MM-DD"),endDate:Q()().subtract(1,"months").endOf("month").format("YYYY-MM-DD")}),"Last 7 Days"===n&&t({selectedItem:"Last 7 Days",startDate:Q()().subtract(7,"days").format("YYYY-MM-DD"),endDate:Q()().format("YYYY-MM-DD")}),"Last 30 Days"===n&&t({selectedItem:"Last 30 Days",startDate:Q()().subtract(30,"days").startOf("month").format("YYYY-MM-DD"),endDate:Q()().format("YYYY-MM-DD")}),"Custom"===n&&t({selectedItem:"Custom",startDate:Q()().format("YYYY-MM-DD"),endDate:Q()().format("YYYY-MM-DD")})},children:[Object(v.jsx)(Pe.a,{value:"Custom",children:"Custom"}),Object(v.jsx)(Pe.a,{value:"Today",children:"Today"}),Object(v.jsx)(Pe.a,{value:"Yesterday",children:"Yesterday"}),Object(v.jsx)(Pe.a,{value:"Last Week",children:"Last Week"}),Object(v.jsx)(Pe.a,{value:"Last Month",children:"Last Month"}),Object(v.jsx)(Pe.a,{value:"Last 7 Days",children:"Last 7 Days"}),Object(v.jsx)(Pe.a,{value:"Last 30 Days",children:"Last 30 Days"})]})]}),"Custom"===e.selectedItem&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(ge.a,{name:"startDate",label:"Start Date",InputLabelProps:{shrink:!0,required:!0},type:"date",defaultValue:e.startDate,onBlur:u,inputProps:{max:e.endDate,required:!0}}),Object(v.jsx)(ge.a,{name:"endDate",label:"End Date",InputLabelProps:{shrink:!0,required:!0},type:"date",defaultValue:e.endDate,onBlur:u,inputProps:{min:e.startDate,required:!0}})]})]})})]})}var Ee=n(446),Re=n(447),Ue=n(414),Ne=n(184),Be=n.n(Ne),Ve=function(e){var t=e.domains,n=void 0===t?[]:t,r=e.onCellClick,c=e.selectedDomain,s=Object(a.useState)(0),i=Object(j.a)(s,2),o=i[0],l=i[1],u=Object(a.useState)(5),d=Object(j.a)(u,2),b=d[0],f=d[1];return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(Ee.a,{component:x.a,children:0!==n.length?Object(v.jsxs)(N.a,{sx:{minWidth:"600px"},children:[Object(v.jsx)(W.a,{children:Object(v.jsxs)(Z.a,{children:[Object(v.jsx)(V.a,{children:Object(v.jsx)(g.a,{sx:{fontWeight:"600",width:200},children:"Property Name"})}),Object(v.jsx)(V.a,{children:Object(v.jsx)(g.a,{sx:{fontWeight:"600"},children:"Url"})}),Object(v.jsx)(V.a,{children:Object(v.jsx)(g.a,{sx:{fontWeight:"600"},children:"Property Id"})}),Object(v.jsx)(V.a,{})]})}),Object(v.jsx)(B.a,{children:(b>0?n.slice(o*b,o*b+b):n).map((function(e){var t,n;return Object(v.jsxs)(Z.a,{children:[Object(v.jsx)(V.a,{children:Object(v.jsx)(g.a,{sx:{fontSize:"12pt"},children:e.displayName})}),Object(v.jsx)(V.a,{children:Object(v.jsx)(g.a,{sx:{fontSize:"12pt"},children:(null===(t=e.dataStreams[0])||void 0===t||null===(n=t.webStreamData)||void 0===n?void 0:n.defaultUri)||"Domain not set"})}),Object(v.jsx)(V.a,{children:Object(v.jsx)(g.a,{sx:{fontSize:"12pt"},children:e.name})}),Object(v.jsx)(V.a,{sx:{textAlign:"center"},children:c&&c.name===e.name?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(Be.a,{color:"success"})}):Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(Ce.a,{variant:"contained",color:"secondary",onClick:function(){return r(e)},children:"Select"})})})]})}))}),Object(v.jsx)(Re.a,{children:Object(v.jsx)(Z.a,{children:Object(v.jsx)(Ue.a,{rowsPerPageOptions:[],colSpan:5,count:n.length,rowsPerPage:b,page:o,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onPageChange:function(e,t){l(t)},onRowsPerPageChange:function(e){f(parseInt(e.target.value,10)),l(0)}})})})]}):Object(v.jsx)(O.a,{sx:{padding:4,minWidth:"600px",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(v.jsx)(g.a,{sx:{fontWeight:600},variant:"h5",children:"There is no domain to select."})})})})},We=n(419),Ze=n(429),Ge=n(185),He=n.n(Ge);function Je(e){var t=e.onSelect,n=e.domainList,r=e.domainSelect,c=e.buttonName,s=void 0===c?"Select Domain":c,i=e.variant,o=void 0===i?"contained":i,l=e.size,u=void 0===l?"":l,d=e.show,b=void 0!==d&&d,f=Object(a.useState)(!1),h=Object(j.a)(f,2),p=h[0],m=h[1];return Object(a.useEffect)((function(){m(b)}),[b]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Ce.a,{variant:o,color:"secondary",onClick:function(){return m(!0)},size:u,children:s}),Object(v.jsx)(We.a,{open:p,onClose:function(){return m(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(v.jsxs)(x.a,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:4},children:[Object(v.jsxs)(O.a,{sx:{paddingBottom:4,display:"flex",justifyContent:"center"},children:[Object(v.jsxs)(O.a,{sx:{flexGrow:1,paddingRight:4},children:[Object(v.jsx)(g.a,{sx:{fontWeight:600,fontSize:"14pt"},children:"Choose from domain list"}),Object(v.jsx)(g.a,{sx:{fontWeight:300,fontSize:"12pt"},children:"Choosing a domain will update your google property id. This change updates production when your cache is refreshed"})]}),Object(v.jsx)(O.a,{children:Object(v.jsx)(Ze.a,{color:"secondary","aria-label":"upload picture",component:"button",onClick:function(){return m(!1)},children:Object(v.jsx)(He.a,{})})})]}),Object(v.jsx)(Ve,{domains:n,onCellClick:t,selectedDomain:r})]})})]})}var qe=n(426),_e=n(398),$e=n(410),Qe=n(445),Xe=n(409),Ke=n(448);function et(e){var t=e.data,n=e.isTyping,a=e.onMenuClick;return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(qe.a,{sx:{maxHeight:"400px",overflowY:"auto",width:"600px"},children:[n&&Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(O.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100px"},children:Object(v.jsx)(m.a,{})})}),t&&!n&&0!==t.length&&Object(v.jsx)(Qe.a,{children:t.map((function(e){return Object(v.jsx)(v.Fragment,{children:e.path&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(Ke.a,{onClick:function(){return a("/content?q=".concat(e.path))},children:Object(v.jsx)(Xe.a,{primary:e.metaTitle,secondary:e.path})}),Object(v.jsx)(fe.a,{})]})})}))}),t&&!n&&0===t.length&&Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(O.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100px"},children:Object(v.jsx)(g.a,{sx:{fontWeight:"bold"},children:"No Data Found"})})})]})})}function tt(e){var t=e.zuid,n=e.token,r=Object(f.f)(),c=Se(t,n).searchItems,s=Object(a.useState)(!1),i=Object(j.a)(s,2),o=i[0],l=i[1],b=Object(a.useState)(null),h=Object(j.a)(b,2),p=h[0],x=h[1],g=Object(a.useState)(null),m=Object(j.a)(g,2),y=m[0],D=m[1],w=Object(a.useState)(""),S=Object(j.a)(w,2),k=S[0],C=S[1],I=function(){x(null)},P="popperMenu",A=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l(!0),n=t.target.value,C(n),""!==n){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,c(n);case 7:a=e.sent,r=Y(a),D(r),l(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(e){return e.data.filter((function(e){return null!==e.web.path})).map((function(e){return e.web}))},T=Object(a.useCallback)(function(e){var t;return function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];var c=this;t&&clearTimeout(t),t=setTimeout((function(){t=null,e.apply(c,a)}),500)}}(A),[]);return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(O.a,{children:Object(v.jsx)(_e.a,{onClickAway:I,children:Object(v.jsxs)("span",{children:[Object(v.jsx)(ge.a,{sx:{width:"600px"},"aria-describedby":P,size:"small",placeholder:"Search Pages",onFocus:function(e){x(e.currentTarget)},onChange:T,inputProps:{autoComplete:"off"}}),""!==k&&Object(v.jsx)($e.a,{id:P,open:Boolean(p),placement:"bottom-start",anchorEl:p,disablePortal:!0,children:Object(v.jsx)(et,{data:y,isTyping:o,onMenuClick:function(e){r(e),I()}})})]})})})})}function nt(e){var t,n=e.zuid,r=e.token,c=be(n,r).getGaDomain,s=q(),i=s.googleDetails,o=s.setGoogleDetails,l=s.setIsAuthenticated,b=Object(a.useState)([]),f=Object(j.a)(b,2),h=f[0],p=f[1],x=Se(n,r),m=x.getGoogleSetting,y=x.updateSetting,D=x.createGa4Setting,w=Object(a.useState)(null),S=Object(j.a)(w,2),k=S[0],C=S[1],I=Object(a.useState)(!1),P=Object(j.a)(I,2),A=P[0],Y=P[1];Object(a.useEffect)(Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c();case 3:t=e.sent,p(t.properties),l(!0),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),l(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])}))),[]),Object(a.useEffect)(Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h||0===h.length){e.next=14;break}return e.next=3,m();case 3:if(t=e.sent){e.next=10;break}return e.next=7,D();case 7:return e.next=9,m();case 9:t=e.sent;case 10:n=h.find((function(e){return e.name===t.value})),""===t.value&&Y(!0),C(t),o(n);case 14:case"end":return e.stop()}}),e)}))),[h]);var T=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(t),(n=k).value=t.name,e.next=5,y(n.ZUID,n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(qe.a,{square:!0,sx:(t={display:"flex",paddingBottom:"0px",alignItems:"center",gap:4,position:"fixed",backgroundColor:"#fff",left:0,right:0,top:0},Object(ke.a)(t,"paddingBottom",2),Object(ke.a)(t,"paddingTop",2),Object(ke.a)(t,"paddingLeft",4),Object(ke.a)(t,"paddingRight",4),Object(ke.a)(t,"zIndex",20),t),children:[Object(v.jsxs)(O.a,{children:[i&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(O.a,{sx:{display:"flex",minWidth:250},children:[Object(v.jsx)(g.a,{variant:"h2",sx:{fontWeight:"600",fontSize:"16pt",color:"#5b667d"},children:i?i.displayName:"No Domain Selected"}),Object(v.jsx)(Je,{domainList:h,onSelect:T,domainSelect:i,buttonName:"Change",variant:"text",size:"small"})]}),Object(v.jsx)(g.a,{variant:"h2",sx:{fontWeight:"200",fontSize:"12pt",color:"#5b667d"},children:i&&i.dataStreams[0].webStreamData.defaultUri})]}),!i&&Object(v.jsx)(O.a,{sx:{width:250},children:Object(v.jsx)(Je,{domainList:h,onSelect:T,domainSelect:i,show:A})})]}),Object(v.jsx)(O.a,{sx:{flexGrow:1},children:Object(v.jsx)(tt,{zuid:n,token:r})}),Object(v.jsx)(O.a,{sx:{display:"flex",gap:2},children:Object(v.jsx)(Le,{})})]})})}var at=n(197),rt=n(187),ct=n(186),st=n.n(ct),it=function(e){var t=e.onClick;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(Ce.a,{variant:"contained",color:"success",onClick:t,startIcon:Object(v.jsx)(st.a,{}),sx:{marginTop:"20px"},children:"Click here to Authenticate With Google"})})},ot=n(437),lt=function(e){var t=e.user,n=e.instance,r=e.isAuthenticated,c=void 0===r||r,s=Object(a.useState)({titles:{noDomain:"Please Setup a Domain before Authenticating",notAuthenticated:"Please Authenticate Google Analytics",legacyAuthentication:"Google needs to be Re-authenticated"},descriptions:{noDomain:"A domain can be set in Zesty.io accounts. Open up your instance settings, and set a domain. Once a domain is set, an authentication button will appear here.",notAuthenticated:"Someone in your organization with Google Analytics access needs to authenticate this Zesty.io instance. Before authenticating, the domain associated with this instance needs to be registed in Google Analytics.",legacyAuthentication:"Traffic is being tracked, but your Google Authentication is from Legacy Zesty.io and needs to be re-authenticated to access new metrics. Someone in your organization with Google Analytics access needs to do this."},generalDescription:"Authenticating Google Analytics will automate GA tags in your Web Engine renders pages. If you use Zesty.io purely headlessly, Google Analytics will on provide value on rendered web views."}),i=Object(j.a)(s,2),o=i[0];i[1];return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(ot.a,{sx:{color:"#fff",zIndex:20},open:!c,onClick:function(){},children:Object(v.jsxs)(O.a,{sx:{display:"flex",flexDirection:"column",justifyItems:"center",alignItems:"center"},children:[Object(v.jsxs)(O.a,{sx:{display:"flex",flexDirection:"column",justifyItems:"center",alignItems:"center",padding:"20px",backgroundColor:"rgba(0, 0, 0, 0.5);",borderRadius:"5px",marginBottom:"20px"},children:[Object(v.jsx)("img",{alt:"Google Analytics Logo",style:{width:"300px"},src:"https://developers.google.com/analytics/images/terms/logo_lockup_analytics_icon_vertical_white_2x.png"}),Object(v.jsxs)("div",{style:{textAlign:"center",display:"flex"},children:[Object(v.jsx)(at.a,{icon:rt.a})," ",Object(v.jsx)(g.a,{sx:{marginLeft:"10px"},children:"Zesty.io WebEngine\u2122 Integration"})]})]}),Object(v.jsxs)(O.a,{sx:{width:"700px",display:"flex",flexDirection:"column",justifyItems:"center",alignItems:"center"},children:[Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(g.a,{variant:"h5",children:o.titles.notAuthenticated}),Object(v.jsx)(g.a,{variant:"p",sx:{fontWeight:"200"},children:o.descriptions.notAuthenticated})]}),Object(v.jsx)(it,{onClick:function(e){var a=encodeURI("https://us-central1-zesty-prod.cloudfunctions.net/authenticateGoogleAnalytics?user_id="+t+"&account_id="+n.ID);window.open(a,"analytics","width=700,height=450,left="+(e.target.offsetLeft+400)+",top="+e.target.offsetTop)}})]})]})})})},ut=n(444),dt=function(){var e;return Object(v.jsx)(qe.a,{sx:(e={width:250,maxWidth:"100%",position:"sticky"},Object(ke.a)(e,"position","-webkit-sticky"),Object(ke.a)(e,"top",0),e),children:Object(v.jsxs)(ut.a,{children:[Object(v.jsx)(Pe.a,{component:b.b,to:"/",children:Object(v.jsx)(g.a,{color:"primary",sx:{fontWeight:"bold"},children:"Overview"})}),Object(v.jsx)(Pe.a,{component:b.b,to:"/content",children:Object(v.jsx)(g.a,{color:"primary",sx:{fontWeight:"bold"},children:"Pages"})}),Object(v.jsx)(Pe.a,{component:b.b,to:"/journey",children:Object(v.jsx)(g.a,{color:"primary",sx:{fontWeight:"bold"},children:"User Journey"})})]})})};function jt(e){var t=e.token,n=e.userId,a=e.instance,r=e.isAuthenticated,c=e.children;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(nt,{zuid:a.ZUID,token:t}),Object(v.jsxs)(O.a,{sx:{p:4,marginTop:10},children:[Object(v.jsx)(lt,{user:n,instance:a,isAuthenticated:r}),Object(v.jsxs)(O.a,{sx:{display:"flex",gap:4},children:[Object(v.jsx)(O.a,{children:Object(v.jsx)(dt,{})}),Object(v.jsx)(O.a,{sx:{flexGrow:1},children:c})]})]})]})}function bt(e){var t=e.data,n=e.metric,a=void 0===n?null:n,r=function(e){var t=e.label,n=e.value;return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(H.a,{item:!0,sx:{padding:3},children:[Object(v.jsx)(g.a,{sx:{fontWeight:"bold",fontSize:"10pt",color:"#5b667d"},children:t}),Object(v.jsxs)(O.a,{sx:{marginTop:"5px"},children:[Object(v.jsx)(g.a,{color:"secondary",sx:{fontSize:"18pt",fontWeight:"bold",marginBottom:"5px"},children:n}),Object(v.jsx)(g.a,{sx:{fontSize:"10pt",color:"#5b667d"},children:"Last 7 Days"})]})]})})},c=function(){var e=t.googleData.reports[0].data.rows[0].metrics[0].values[0];return e=Q()().startOf("day").seconds(Number(e)).format("HH:mm:ss"),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(r,{label:"Average Session Duration",value:e})})},s=function(){var e=t.googleData.reports[0].data.rows[0].metrics[0].values[1];return e=Number(e).toFixed(2),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(r,{label:"Bounce Rate",value:e})})},i=function(){var e=t.googleData.reports[0].data.rows[0].metrics[0].values[2];return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(r,{label:"Page Value",value:e})})},o=function(){var e=t.googleData.reports[0].data.rows[0].metrics[0].values[3];return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(r,{label:"Page Views",value:e})})},l=function(){var e=t.googleData.reports[0].data.rows[0].metrics[0].values[4];return e=Number(e).toFixed(2),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(r,{label:"Event Per Session",value:e})})},u=function(){var e=t.googleData.reports[0].data.rows[0].metrics[0].values[5];return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(r,{label:"Conversions",value:e})})};return Object(v.jsxs)(v.Fragment,{children:["bounce-rate"===a&&Object(v.jsx)(s,{}),"avg-session-duration"===a&&Object(v.jsx)(c,{}),"page-value"===a&&Object(v.jsx)(i,{}),"page-views"===a&&Object(v.jsx)(o,{}),"event-per-session"===a&&Object(v.jsx)(l,{}),"conversions"===a&&Object(v.jsx)(u,{}),null===a&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(s,{}),Object(v.jsx)(c,{}),Object(v.jsx)(i,{}),Object(v.jsx)(o,{}),Object(v.jsx)(l,{}),Object(v.jsx)(u,{})]})]})}function ft(e){var t=e.instance,n=e.token,r=e.path,c=void 0===r?[]:r,s=Object(f.g)().metric,i=Object(a.useState)(null),o=Object(j.a)(i,2),l=o[0],b=o[1],h=ee(),p=be(t.ZUID,n).getContentSinglePage,O=Se(t.ZUID,n).getGoogleSetting,g=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:return t=e.sent,e.next=5,p(t.value,h,"bar",c,10);case 5:n=e.sent,b(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){g()}),[]),Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(x.a,{children:Object(v.jsx)(H.a,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"flex-start",children:null!==l&&Object(v.jsx)(bt,{data:l,metric:s})})})})}function ht(e){e.selectedPath;var t=e.data,n=e.isLoading,r=void 0===n||n,c=ee(),s=Object(a.useState)(null),i=Object(j.a)(s,2),l=i[0],u=i[1],d=Object(a.useState)(null),b=Object(j.a)(d,2),f=b[0],h=b[1];Object(a.useEffect)((function(){t&&"Loading"!==t.datasets[0].label&&null===l&&null===f&&u("ScreenPageViews")}),[t]);var x=function(e,t){if(e.target.checked)return u(t);u(null)},m=function(e,t){if(e.target.checked)return h(t);h(null)},D=function(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(O.a,{sx:{display:"flex",gap:2,alignItems:"center",justifyContent:"center"},children:[Object(v.jsx)(ue,{metrics:t.datasets,selectedMetrics:l,onSelect:x}),Object(v.jsx)(g.a,{children:"vs"}),Object(v.jsx)(ue,{metrics:t.datasets,selectedMetrics:f,onSelect:m})]})})},w=function(e,t,n){if(f)return f.includes("Duration")?Q()().startOf("day").seconds(Number(e)).format("HH:mm:ss"):f.includes("Rate")?Math.round(e)+"%":f.includes("Value")?e+"$":e},S=function(e,t,n){if(l)return l.includes("Duration")?Q()().startOf("day").seconds(Number(e)).format("HH:mm:ss"):l.includes("Rate")?Math.round(e)+"%":l.includes("Value")?e+"$":e};return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(y,{title:"Metric",loading:r,subTitle:c.selectedItem,rightMenu:Object(v.jsx)(D,{}),children:Object(v.jsx)(p.b,{data:{labels:t.labels,datasets:[l?t.datasets.filter((function(e){return e.label===l})).map((function(e){return Object(o.a)(Object(o.a)({},e),{},{yAxisID:"y1"})})).shift():null,f?t.datasets.filter((function(e){return e.label===f})).map((function(e){return Object(o.a)(Object(o.a)({},e),{},{yAxisID:"y2"})})).shift():null].filter((function(e){return null!==e}))},height:400,options:{responsive:!0,maintainAspectRatio:!1,bezierCurve:!1,tooltips:{callbacks:{label:function(e){return t=e.datasetIndex,n=e.value,0===t?S(n):w(n);var t,n},title:function(e){var t=e[0].label;return Q()(t).format("YYYY-MM-DD")}}},scales:{yAxes:[{id:"y1",type:"linear",position:"left",ticks:{callback:S}},{id:"y2",type:"linear",position:"right",ticks:{callback:w}}],xAxes:[{ticks:{callback:function(e,t,n){return Q()(e).format("YYYY-MM-DD")}}}]}}})})})}function pt(e){var t=e.instance,n=e.token,r=e.path,c=void 0===r?[]:r,s=Object(a.useState)(null),i=Object(j.a)(s,2),o=i[0],l=i[1],b=Object(a.useState)(!1),f=Object(j.a)(b,2),h=f[0],p=(f[1],ee()),x=be(t.ZUID,n).getChartData,O=Se(t.ZUID,n).getGoogleSetting,g=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:return t=e.sent,e.next=5,x(t.value,p,"bar",c);case 5:n=e.sent,l(n.chartJSData);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){g()}),[]),Object(v.jsx)(v.Fragment,{children:null!==o&&Object(v.jsx)(ht,{data:o,isLoading:h,selectedPath:c})})}function xt(e){var t=e.selectedPagePath,n=e.tableData,r=I(),c=Object(a.useState)([]),s=Object(j.a)(c,2),i=s[0],o=s[1],l=Object(a.useState)([]),b=Object(j.a)(l,2),f=b[0],h=b[1],p=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n.length)try{t=n.tableData.data.map((function(e){return e.map((function(e){return Number(e)?Number(Math.round(e+"e2")+"e-2"):e}))})),o(n.tableData.headers),h(t)}catch(a){r.current.error(a.message)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){p()}),[n,t]),Object(v.jsx)(v.Fragment,{children:i.length&&f.length?Object(v.jsxs)(N.a,{children:[Object(v.jsx)(W.a,{children:Object(v.jsx)(Z.a,{children:i.map((function(e){return Object(v.jsx)(V.a,{children:e.replace(/([A-Z])/g," $1").trim()})}))})}),Object(v.jsx)(B.a,{children:f.map((function(e,n){return Object(v.jsx)(Z.a,{sx:{backgroundColor:0!==t.length?t.includes(e[0])?"#ffffff":"#f2f4fb":"#ffffff"},children:e.map((function(e){return Object(v.jsx)(V.a,{children:e})}))})}))})]}):"No content performance data to display"})}function Ot(e){var t=e.instance,n=e.token,r=e.path,c=void 0===r?[]:r,s=be(t.ZUID,n).getContentPages,i=Se(t.ZUID,n).getGoogleSetting,o=Object(a.useState)([]),l=Object(j.a)(o,2),b=l[0],f=l[1],h=ee(),p=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:return t=e.sent,e.next=5,s(t.value,h,"bar",c,10);case 5:n=e.sent,f(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){p()}),[]),Object(v.jsx)(v.Fragment,{children:null!==b&&Object(v.jsx)(xt,{selectedPagePath:c,tableData:b})})}function gt(e){var t=e.instance,n=e.token,r=Object(f.g)().type,c=Se(t.ZUID,n).getGoogleSetting,s=ee(),i=Object(a.useState)(null),o=Object(j.a)(i,2),l=o[0],b=o[1],p=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:(t=e.sent)&&b({name:t.value});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){p()}),[]),Object(v.jsxs)(v.Fragment,{children:[null!==l&&"pageview-traffic"===r&&Object(v.jsx)(E,{instanceZUID:t.ZUID,googleDetails:l,data:h.shellBarData,dateRange:s,token:n}),null!==l&&"inbound-traffic"===r&&Object(v.jsx)(R,{instanceZUID:t.ZUID,googleDetails:l,data:h.shellDoughnutData,dateRange:s,token:n}),null!==l&&"social-traffic"===r&&Object(v.jsx)(U,{instanceZUID:t.ZUID,googleDetails:l,dateRange:s,data:h.shellDoughnutData,token:n}),null!==l&&"top-performing"===r&&Object(v.jsx)(G,{instanceZUID:t.ZUID,googleDetails:l,dateRange:s,token:n})]})}function mt(e){var t=q(),n=t.isAuthenticated,r=t.setIsAuthenticated,c=Se(e.instance.zuid,e.token).getUserData,s=Object(a.useState)(null),i=Object(j.a)(s,2),l=i[0],h=i[1];Object(a.useEffect)(Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:if(null!==(t=e.sent).data){e.next=5;break}return e.abrupt("return",r(!1));case 5:h(t.data);case 6:case"end":return e.stop()}}),e)}))),[]);return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(b.a,{children:Object(v.jsxs)(f.c,{children:[Object(v.jsx)(f.a,{exact:!0,path:"/",element:Object(v.jsx)(jt,Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:n,userId:l,children:Object(v.jsx)(ne,Object(o.a)({},e))}))}),Object(v.jsx)(f.a,{exact:!0,path:"/content",element:Object(v.jsx)(jt,Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:n,userId:l,children:Object(v.jsx)(pe,Object(o.a)({},e))}))}),Object(v.jsx)(f.a,{exact:!0,path:"/journey",element:Object(v.jsx)(jt,Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:n,userId:l,children:Object(v.jsx)(we,Object(o.a)({},e))}))}),Object(v.jsx)(f.a,{exact:!0,path:"/content/card",element:Object(v.jsx)(ft,Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:n}))}),Object(v.jsx)(f.a,{exact:!0,path:"/content/card/:metric",element:Object(v.jsx)(ft,Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:n}))}),Object(v.jsx)(f.a,{exact:!0,path:"/content/graph",element:Object(v.jsx)(pt,Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:n}))}),Object(v.jsx)(f.a,{exact:!0,path:"/content/table",element:Object(v.jsx)(Ot,Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:n}))}),Object(v.jsx)(f.a,{exact:!0,path:"/journey/graph",element:Object(v.jsx)(we,Object(o.a)({},e))}),Object(v.jsx)(f.a,{exact:!0,path:"/overview/graph/:type",element:Object(v.jsx)(gt,Object(o.a)({},e))}),Object(v.jsx)(f.a,{component:function(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("p",{children:"Page not found."})})}})]})})})}var vt=function(){return Object(v.jsx)(i.a,{children:Object(v.jsx)(mt,{})})},yt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,450)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},Dt=n(194).a,wt=n(424);function St(e){var t=e.children;return Object(v.jsx)(te,{children:Object(v.jsx)(P,{children:Object(v.jsx)(_,{children:t})})})}s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(wt.a,{theme:Dt,children:Object(v.jsx)(St,{children:Object(v.jsx)(vt,{})})})}),document.getElementById("root")),yt()}},[[331,1,2]]]);
//# sourceMappingURL=main.e7557e3d.chunk.js.map